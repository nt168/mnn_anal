# CLAUDE.md

本文档提供Claude Code (claude.ai/code)在本代码库中工作的指导信息。

## 一、项目概述

EAO（端侧AI推理优化）基准测试项目专注于建立LLM在端侧设备上的性能数学模型，为端侧设备设计和AI框架开发提供科学依据和技术支撑。项目采用科学的5步递进式论证方法，建立标准化的端侧LLM推理基准测试体系。

## 二、核心工作方法论

### 2.1 5步递进式科学论证
```
模型基础 → 指标确定 → 长度约束 → 方法验证 → 参数体系
   1号报告 → 2号报告 → 3号报告 → 4号报告 → 5号报告
```

**执行原则**：
- 每步为后续步骤提供基础约束
- 严格遵循科学递进逻辑
- 依赖关系清晰明确
- 成果具备可重现性

### 2.2 当前阶段：预备阶段
**状态**：文档框架和科学方法论已建立
**核心任务**：建立端侧LLM推理基准测试的科学基础和参数体系

## 三、项目结构

### 3.1 阶段划分
- **01-预备阶段**：科学基础建立（当前进行）
- **02-初测阶段**：广泛参数测试和范围确定
- **03-详测阶段**：详细数据采集和性能建模
- **04-硅前阶段**：自动化脚本和硅后验证

### 3.2 预备阶段详细结构（当前阶段）
```
01-预备阶段/
├── README.md              # 阶段工作逻辑和导航指南
├── 任务规划.md              # 5步科学方法论详细说明
├── 1.基准测试大模型集选用合理性分析/    # 模型基础（1号报告）
│   ├── 1.基准测试大模型集选用合理性分析.md
│   ├── README.md
│   ├── 测试脚本/
│   ├── 测试配置/
│   ├── 测试数据/
│   └── 测试结果/
├── 2.Prefill与Decode性能指标可行性论证/    # 指标确定（2号报告）
│   ├── 2.Prefill与Decode性能指标可行性论证.md
│   ├── README.md
│   ├── 测试脚本/
│   ├── 测试配置/
│   ├── 测试数据/
│   └── 测试结果/
├── 3.基准测试提示词长度选定合理性分析/        # 长度约束（3号报告）
│   ├── 3.基准测试提示词长度选定合理性分析.md
│   ├── README.md
│   ├── 测试脚本/
│   ├── 测试配置/
│   ├── 测试数据/
│   └── 测试结果/
├── 4.llama.cpp固定提示词模式可行性论证/        # 方法验证（4号报告）
│   ├── 4.llama.cpp固定提示词模式可行性论证.md
│   ├── README.md
│   ├── 测试脚本/
│   ├── 测试配置/
│   ├── 测试数据/
│   └── 测试结果/
└── 5.基准测试变量参数集选定合理性分析/        # 参数体系（5号报告）
    ├── 5.基准测试变量参数集选定合理性分析.md
    ├── README.md
    ├── 测试脚本/
    ├── 测试配置/
    ├── 测试数据/
    └── 测试结果/
```

## 四、技术要点

### 4.1 核心技术栈
- **推理引擎**：MNN推理引擎（主要验证工具）
- **测试模式**：llama.cpp固定提示词模式、Prefill/Decode分离测试
- **分析指标**：pp值（Prefill阶段tps）、tp值（Decode阶段tps）、混合结果、测试耗时
- **目标平台**：具有AI推理能力的端侧设备（移动、嵌入式、IoT）

### 4.2 关键交付原则
- **科学性**：采用5步递进式论证，逻辑严密
- **实用性**：关注端侧设备实际需求和约束
- **标准化**：建立可重现的测试方法
- **系统性**：覆盖模型、方法、参数的完整体系

## 五、工作指导

### 5.1 文件命名和组织
- **报告编号**：严格按1-5号顺序，对应5步工作流程
- **README分层**：主README（使用指导）→阶段README（工作逻辑）→具体README（实施细节）
- **避免时间管理**：文档专注工作方法论，不涉及时间和进度管理

### 5.2 协作规范
- **语言**：主文档使用中文，技术说明可混合英文
- **图表标准**：统一使用Mermaid格式
- **内容聚焦**：每层README承担明确的职责，避免重复
- **依赖明确**：严格遵守递进依赖关系

### 5.3 工作优先级
1. **准确性**：确保技术分析的科学性和可重现性
2. **实用性**：关注端侧设备和框架的实际需求
3. **规范性**：遵循文档和测试的标准化要求
4. **完整性**：建立覆盖完整的测试体系

## 六、常见工作场景

### 6.1 添加新测试
1. 确定属于哪个报告（1-5号）
2. 检查是否满足前置条件
3. 使用标准化模板编写文档
4. 放置在对应目录下的合适子目录

### 6.2 更新分析结果
1. 更新对应的主分析文档
2. 更新测试结果数据
3. 检查是否影响后续报告依赖
4. 同步更新相关README

### 6.3 文档管理
1. **主README**：项目概览和使用指导
2. **阶段README**：工作逻辑和依赖关系
3. **具体README**：实施细节和技术方法
4. **文档索引**：核心交付成果追踪

## 七、注意事项

- **避免进度管理**：文档系统不承担时间和进度管理职责
- **专注方法论**：重点是科学工作方法和技术细节
- **保持简洁**：避免冗余信息，确保重点突出
- **及时更新**：结构调整或方法论变更时同步更新指导信息

---

**最后更新**：2025年11月19日
**适用版本**：5步递进式工作方法论v1.0