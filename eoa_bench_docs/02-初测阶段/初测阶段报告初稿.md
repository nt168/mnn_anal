# EAO基准测试初测阶段报告

## 一、执行概述

**报告时间**：2025年11月26日
**阶段性质**：初测阶段
**测试基础**：基于预备阶段5步科学论证方法
**核心发现**：测试稳定性远超预期，需要重构测试方法

## 二、初测阶段总体成果

### 2.1 测试数据完整性

**测试覆盖范围**：
- **模型数量**：2个核心模型（hunyuan_05b、qwen3_06b）
- **参数配置**：256个测试点
- **PP值测试**：16个提示词长度点（64-1024），每个点16组测试
- **TG值测试**：8个生成长度点（32-256），每个点32组测试
- **数据完整性**：100%覆盖，无缺失数据

### 2.2 性能数据规律性发现

**PP值（Prefill阶段）性能规律**：
- 随提示词长度增加，性能平滑下降
- 变化范围：51.75 tokens/s（1024长度）→ 72.31 tokens/s（128长度）
- 性能表现稳定，无异常波动
- 各模型表现一致性高

**TG值（Decode阶段）性能规律**：
- 提示词长度增加对性能影响相对较小
- hunyuan_05b平均性能：30.52 tokens/sec
- qwen3_06b平均性能：27.00 tokens/sec
- 明确的生成长度效应：增长导致性能下降

### 2.3 重大发现：测试稳定性突破

**PP值稳定性表现**：
- **整体平均CV值**：0.050%（远优于预设3%标准）
- **CV分布**：所有测试点CV值均小于1%
- **最优表现**：部分测试点CV值达到0.0%（完美稳定）
- **最大CV值**：0.319%（仍远优于3%标准）

**TG值稳定性表现**：
- **整体平均CV值**：0.149%（同样远优于预设标准）
- **CV分布**：96.9%（248/256）测试点CV < 1%
- 99.6%（255/256）测试点CV < 3%
- 100%测试点CV < 5%
- **最大CV值**：3.68%（个别异常点，但仍在可接受范围）

## 三、测试参数选择优化成果

### 3.1 核心参数确定

基于实际测试结果，确定了以下关键参数：

**固定模式选择**：
- 确认采用llama.cpp固定提示词模式（-kv=true）
- 可变提示词和文件提示词对性能几乎无影响
- Benchmark模式选定：kv=true模式，无需pg参数

**重复测试次数**：
- 测试发现3次重复已获得较小CV值
- 原预设10-20次重复存在过度设计问题
- 建议调整为3-5次快速验证

**加载时间测试**：
- 如果每轮加入loadtime测试，会增加运行时间
- 硅前测试需要权衡时间成本
- 可能需要修改代码增加无标准差结果选项

### 3.2 模型选择策略

**硅后测试模型选择**：
- 需要综合考虑各个维度
- 选择可在16g内存D3000m上运行的5-10个模型
- 优先覆盖更多维度和类型

**硅前测试模型选择**：
- 考虑到100秒运行时间限制
- 建议选择3个测试实例：两个小模型（1B以下），一个中型模型（1-2B）
- 每个模型测试一个或两个性能点

### 3.3 基本参数配置

确认以下基础参数设置：
- `-c, --precision <n>`：精度设置（默认2-Low）
- `-t, --threads <n>`：线程数设置（默认4）
- `-mmp, --mmap <0|1>`：内存映射配置（默认0）
- `-dyo, --dynamicOption <n>`：动态选项（默认0，设8可提升解码性能）

## 四、后期测试方向规划

### 4.1 硅前测试优化策略

**时间映射关系确认**：
- **尚需确认1**：100秒仿真时间相当于物理世界多少时间？需要精确的比例尺
- **尚需确认2**：仿真机运行时间是否包括操作系统启动、程序加载等开销？
- **尚需确认3**：仿真机是否能调整到与D3000m开发版硬件参数完全一致？

**测试效率优化**：
- 基于发现的稳定性优化测试重复次数
- 简化复杂的5阶段验证流程
- 建立新的质量评估体系

### 4.2 方法论重构方向

**从科学严谨转向工程实用**：
- 重点评估：实际应用价值
- 验证标准：工程可接受度
- 测试目标：支撑端侧设备设计决策

**从复杂性转向简洁性**：
- 测试设计：简单直接的方法更有效
- 流程优化：减少不必要的复杂环节
- 执行效率：提升测试工作效率

### 4.3 后续测试重点

**多模态模型验证**：
- **尚需确认1**：文件提示词为词库特殊的多模态模型准备，使用其他多模态模型是否可行？
- **尚需确认2**：多模态和非多模态模型之间是否存在不一致的性能表现？
- **尚需确认3**：不同的多模态模型之间是否存在不一致的性能表现？

**参数精细化研究**：
- 每个模型测试一个性能点可能不足，最好一个实验测试两个点
- 不同重复次数（2、3、4、5次）的典型CV值需要具体数据
- 负载与性能平衡点需要进一步验证

## 五、当前尚待解决的关键问题

### 5.1 硅前仿真基础设施问题

1. **仿真时间比例尺问题**
   - 需要明确100秒仿真时间的物理世界对应时间
   - 建立准确的时间映射模型

2. **仿真环境配置问题**
   - 操作系统启动时间是否计入总时间
   - 程序加载时间等环境开销的量化
   - D3000m开发版硬件参数完全匹配的可行性

3. **硬件兼容性验证**
   - 仿真机与实际硬件的性能映射关系
   - 不同硬件平台的测试结果一致性

### 5.2 测试方法学问题

1. **多模态测试标准化**
   - 文件提示词的适用范围验证
   - 不同多模态模型的测试方法统一

2. **参数优化细化**
   - 不同重复次数的CV值量化分析
   - 负载测试与性能测试的最优平衡点

3. **质量标准重定义**
   - 基于实际稳定性的CV标准调整
   - 工程实用性评估体系建立

### 5.3 测试效率与精度平衡

1. **重复测试策略优化**
   - 当前3次重复是否足够
   - 关键测试点的重点验证机制
   - 效率与精度的最优配置

2. **测试流程重构**
   - 现有5阶段流程的简化方案
   - 新流程的科学性和实用性保证

3. **资源分配优化**
   - 测试资源的优先级分配
   - 测试时间与质量的平衡策略

## 六、重大建议与决策建议

### 6.1 立即调整建议

1. **暂停复杂多阶段测试**
   - 重新评估各测试阶段的必要性
   - 识别可以合并或简化的测试环节

2. **简化重复策略**
   - 减少重复次数从10-20次到3-5次
   - 优化测试流程设计，提高执行效率

3. **重新定义质量标准**
   - 基于实际稳定性数据调整CV要求
   - 制定新的质量评估体系

### 6.2 中长期策略调整

1. **方法论重构**
   - 建立适合高稳定性环境的测试策略
   - 强化实用性评估导向

2. **资源配置优化**
   - 减少不必要的重复和复杂验证
   - 建立成本效益评估模型

3. **标准化体系建设**
   - 基于实际性能表现调整测试标准
   - 建立新的评估框架

### 6.3 风险控制措施

1. **避免过度简化**
   - 保留关键验证环节确保科学性
   - 文档化决策过程保持透明性

2. **持续监控机制**
   - 建立测试效果的持续监控
   - 及时调整优化策略

## 七、总结与展望

### 7.1 阶段核心成果

初测阶段取得了超出预期的重大成果：

1. **数据完整性**：成功获取256个测试点的完整性能数据
2. **稳定性突破**：发现测试稳定性远超预期（CV < 1%为常态）
3. **方法学洞察**：识别出当前测试方法的过度设计问题
4. **优化方向**：明确了效率提升和实用性改进的路径

### 7.2 重大认知转变

1. **从稳定性担忧到效率关注**：稳定性不是主要矛盾，效率优化更重要
2. **从复杂验证到简洁有效**：简单的直接测试比多阶段验证更有效
3. **从统计严格到工程实用**：实际应用价值比统计显著性更重要
4. **从理论完美到实践高效**：可用的优于完美的，效率优先

### 7.3 未来展望

基于初测阶段的重大发现，EAO项目进入新的发展阶段：

- **短期**：立即优化测试策略，提升效率和实用性
- **中期**：重构测试方法论，建立新的评估体系
- **长期**：构建端侧LLM推理性能数学模型的科学基础

初测阶段不仅为后续工作提供了坚实的数据基础，更重要的是带来了方法学层面的深刻洞察，为整个EAO项目的顺利进行奠定了科学基础。

---

**报告状态**：初稿，待项目组审议
**下一步行动**：项目组讨论方法论重构方案
**重点关注**：硅前仿真基础设施建设和测试效率优化