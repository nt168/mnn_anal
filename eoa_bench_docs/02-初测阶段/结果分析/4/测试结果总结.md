# 初测结果4测试结果总结
## D3000M CPU多核性能测试

本测试基于D3000M CPU在0,1,2,4,5,6六个小核上运行的多核性能测试结果，针对三个不同规模的LLM模型在多线程环境下的推理性能进行系统性评估。

---

## 一、测试设计概览

### 1.1 测试硬件配置

- **CPU核心**: D3000M小核（6核：0,1,2,4,5,6）
- **运行模式**: 多线程并行执行
- **架构类型**: ARM低功耗核心群

### 1.2 涉及模型规模

| 模型名称 | 模型文件大小 | 权重文件大小 | 参数级别 |
|----------|-------------|-------------|----------|
| Qwen3_0.6B | 0.461M | 451M | 中等规模 |
| hunyuan_05B | 0.398M | 399M | 中等规模 |
| SmolVLM2-256M | 0.476M | 150M | 轻量级 |

---

## 二、测试参数配置

### 2.1 固定参数设计

```json
{
  "threads": 6,
  "precision": 2,
  "kv_cache": true,
  "mmap": true,
  "dynamicOption": 7,
  "vp": 1,
  "load": true
}
```

### 2.2 可变参数设计

| 参数名 | 起始值 | 结束值 | 步长 | 值个数 |
|--------|--------|--------|------|--------|
| n_prompt (p) | 256 | 512 | 64 | 5 |
| n_gen (n) | 32 | 64 | 16 | 3 |

### 2.3 测试矩阵计算

- **P/N组合**: 5×3 = 15组合
- **测试用例总数**: 15×3模型 = 45个
- **数据点总数**: 45个条件×6个性能指标 = 270个

---

## 三、数据规格说明

### 3.1 核心性能指标

| 指标类型 | 指标含义 | 计算方式 | 单位 |
|----------|----------|----------|------|
| 预填tps | Prefill阶段吞吐量 | token/秒 | token/s |
| 解码tps | Decode阶段吞吐量 | token/秒 | token/s |
| 加载 | 模型加载时间 | 秒 | s |

### 3.2 方差指标说明

所有性能指标均包含方差值，用于评估性能稳定性：
- **预填tps方差**: Prefill阶段性能波动
- **解码tps方差**: Decode阶段性能波动
- **加载方差**: 加载时间波动

### 3.3 测试范围覆盖

#### 预填充长度(n_prompt)范围

- **最小值**: 256 tokens
- **最大值**: 512 tokens
- **分布**: 5点等间隔采样

#### 生成长度(n_gen)范围

- **最小值**: 32 tokens
- **最大值**: 64 tokens
- **分布**: 3点等间隔采样

---

## 四、原始数据汇总

### 4.1 性能指标原始数据

| 模型 | p值 | n值 | 预填tps | 预填方差 | 解码tps | 解码方差 | 加载时间 | 加载方差 |
|------|-----|-----|---------|----------|---------|----------|----------|----------|
| Qwen3_0.6B | 256 | 32 | 308.22 | 0.14 | 69.83 | 0.03 | 1.16 | 0.57 |
| Qwen3_0.6B | 256 | 48 | 308.62 | 0.51 | 74.22 | 0.00 | 0.42 | 0.08 |
| Qwen3_0.6B | 256 | 64 | 308.26 | 0.14 | 74.25 | 0.02 | 0.42 | 0.08 |
| Qwen3_0.6B | 320 | 32 | 297.51 | 0.09 | 71.87 | 0.01 | 0.42 | 0.08 |
| Qwen3_0.6B | 320 | 48 | 298.66 | 0.30 | 71.64 | 0.03 | 0.42 | 0.08 |
| Qwen3_0.6B | 320 | 64 | 297.23 | 0.39 | 71.45 | 0.01 | 0.42 | 0.08 |
| Qwen3_0.6B | 384 | 32 | 290.23 | 0.06 | 69.19 | 0.03 | 0.42 | 0.08 |
| Qwen3_0.6B | 384 | 48 | 290.59 | 0.14 | 69.00 | 0.04 | 0.43 | 0.08 |
| Qwen3_0.6B | 384 | 64 | 289.39 | 0.19 | 68.40 | 0.04 | 0.42 | 0.07 |
| Qwen3_0.6B | 448 | 32 | 279.71 | 0.04 | 66.70 | 0.02 | 0.42 | 0.08 |
| Qwen3_0.6B | 448 | 48 | 279.95 | 0.06 | 66.04 | 0.03 | 0.42 | 0.08 |
| Qwen3_0.6B | 448 | 64 | 278.02 | 0.31 | 65.93 | 0.01 | 0.42 | 0.08 |
| Qwen3_0.6B | 512 | 32 | 269.48 | 0.11 | 64.07 | 0.02 | 0.42 | 0.08 |
| Qwen3_0.6B | 512 | 48 | 269.49 | 0.08 | 63.67 | 0.04 | 0.42 | 0.08 |
| Qwen3_0.6B | 512 | 64 | 269.44 | 0.02 | 63.65 | 0.01 | 0.42 | 0.08 |
| hunyuan_05B | 256 | 32 | 322.58 | 0.33 | 38.84 | 0.00 | 1.53 | 0.12 |
| hunyuan_05B | 256 | 48 | 332.18 | 0.30 | 38.80 | 0.05 | 1.49 | 0.10 |
| hunyuan_05B | 256 | 64 | 332.59 | 0.36 | 38.62 | 0.00 | 1.49 | 0.10 |
| hunyuan_05B | 320 | 32 | 323.97 | 0.08 | 38.03 | 0.04 | 1.50 | 0.10 |
| hunyuan_05B | 320 | 48 | 324.30 | 0.22 | 38.02 | 0.02 | 1.51 | 0.10 |
| hunyuan_05B | 320 | 64 | 323.09 | 0.28 | 38.01 | 0.02 | 1.49 | 0.10 |
| hunyuan_05B | 384 | 32 | 315.22 | 0.05 | 37.40 | 0.02 | 1.50 | 0.10 |
| hunyuan_05B | 384 | 48 | 316.31 | 0.20 | 37.37 | 0.01 | 1.49 | 0.11 |
| hunyuan_05B | 384 | 64 | 315.64 | 0.09 | 37.36 | 0.01 | 1.50 | 0.10 |
| hunyuan_05B | 448 | 32 | 306.12 | 0.54 | 36.74 | 0.01 | 1.49 | 0.11 |
| hunyuan_05B | 448 | 48 | 306.09 | 0.60 | 36.67 | 0.01 | 1.50 | 0.10 |
| hunyuan_05B | 448 | 64 | 305.47 | 0.67 | 36.51 | 0.00 | 1.49 | 0.10 |
| hunyuan_05B | 512 | 32 | 295.89 | 0.12 | 35.83 | 0.01 | 1.50 | 0.10 |
| hunyuan_05B | 512 | 48 | 296.04 | 0.17 | 35.99 | 0.00 | 1.50 | 0.10 |
| hunyuan_05B | 512 | 64 | 296.30 | 0.15 | 36.01 | 0.00 | 1.49 | 0.10 |
| SmolVLM2-256M | 256 | 32 | 1127.26 | 0.91 | 83.97 | 0.17 | 0.72 | 0.02 |
| SmolVLM2-256M | 256 | 48 | 1127.78 | 0.14 | 84.22 | 0.16 | 0.81 | 0.03 |
| SmolVLM2-256M | 256 | 64 | 1127.85 | 0.25 | 84.37 | 0.08 | 0.70 | 0.03 |
| SmolVLM2-256M | 320 | 32 | 1087.60 | 0.81 | 82.66 | 0.12 | 0.70 | 0.03 |
| SmolVLM2-256M | 320 | 48 | 1085.88 | 1.25 | 82.46 | 0.08 | 0.70 | 0.03 |
| SmolVLM2-256M | 320 | 64 | 1085.85 | 1.81 | 82.24 | 0.05 | 0.71 | 0.03 |
| SmolVLM2-256M | 384 | 32 | 1056.07 | 1.13 | 81.22 | 0.06 | 0.82 | 0.03 |
| SmolVLM2-256M | 384 | 48 | 1052.99 | 0.19 | 81.88 | 0.10 | 0.70 | 0.03 |
| SmolVLM2-256M | 384 | 64 | 1050.70 | 0.29 | 81.95 | 0.04 | 0.71 | 0.03 |
| SmolVLM2-256M | 448 | 32 | 1002.99 | 1.62 | 80.76 | 0.25 | 0.71 | 0.03 |
| SmolVLM2-256M | 448 | 48 | 1001.58 | 1.88 | 80.77 | 0.09 | 0.70 | 0.03 |
| SmolVLM2-256M | 448 | 64 | 1005.60 | 0.47 | 80.80 | 0.04 | 0.70 | 0.03 |
| SmolVLM2-256M | 512 | 32 | 957.10 | 0.10 | 80.09 | 0.17 | 0.70 | 0.03 |
| SmolVLM2-256M | 512 | 48 | 960.57 | 0.62 | 79.83 | 0.02 | 0.70 | 0.03 |
| SmolVLM2-256M | 512 | 64 | 960.42 | 0.65 | 80.14 | 0.26 | 0.71 | 0.03 |

---

## 五、数据完整性与质量

### 5.1 数据覆盖统计

- **测试模型数**: 3个
- **P/N组合数**: 15个
- **每模型数据点**: 15个
- **总数据行数**: 45行
- **每行指标数**: 8个
- **总数据点**: 360个

### 5.2 模型分组数据量

| 模型名称 | 数据行数 | 数据完整性 | 采样均匀性 |
|----------|----------|------------|------------|
| Qwen3_0.6B | 15 | 完整 | 均匀 |
| hunyuan_05B | 15 | 完整 | 均匀 |
| SmolVLM2-256M | 15 | 完整 | 均匀 |

---

## 六、与前期测试对比

### 6.1 相对于单核测试（1-3目录）

- **线程配置**: 从单线程增加到6线程
- **功能设置**: 从kv_cache=false改为true
- **内存设置**: 从mmap=0/1改为固定true
- **优化级别**: 从多个选项改为固定dynamicOption=7

### 6.2 测试环境差异

| 测试批次 | 线程数 | KV缓存 | mmap | 动态优化 |
|----------|--------|--------|------|----------|
| 前期1-3目录 | 1 | false | 0/1 | 0/7/8 |
| 当前4目录 | 6 | true | true | 7 |

### 6.3 硬件配置特征

- **核心选择**: 使用0,1,2,4,5,6核（避开3号核心）
- **核心类型**: 小核群组
- **并行模式**: 多线程并行推理

---

## 七、技术规格说明

### 7.1 测试执行规格

- **CPU亲和性**: 固定6个小核执行
- **重复测试**: 性能指标基于多次重复测试的统计值
- **采样策略**: P/N参数网格化等间距采样

### 7.2 数据存储规格

- **文件格式**: CSV格式，逗号分隔
- **编码方式**: UTF-8编码
- **统计维度**: 包含均值和方差信息

---

## 八、说明与注意事项

### 8.1 数据使用说明

- 本文档为原始数据汇总，不包含任何计算结果或分析结论
- 所有性能指标均为实测值，直接来源于CSV文件
- 方差数据反映测试的稳定性特征

### 8.2 后续分析建议

- 可基于此数据进行回归分析、趋势分析和模型对比
- 建议结合前期测试数据进行跨配置对比分析
- 注意多核环境与单核环境的性能差异分析

---

**最后更新**: 2025年12月11日
**测试版本**: EAO初测阶段 多核性能测试 v1.0
**数据源**: D3000Mstep-p64n16.csv