# GEMINI.md

本文档提供Gemini AI助手在EAO基准测试项目文档库中工作的指导信息。

## 一、项目概述

EAO（端侧AI推理优化）基准测试项目专注于建立LLM在端侧设备上的性能数学模型，为端侧设备设计和AI框架开发提供科学依据和技术支撑。项目采用科学的5步递进式论证方法，建立标准化的端侧LLM推理基准测试体系。

### 1.1 项目目标

- **建立性能基准**：为大语言模型推理建立标准化的性能基准测试体系
- **参数优化**：通过科学测试确定最优的推理参数配置
- **性能建模**：建立数学模型预测不同配置下的性能表现
- **自动化测试**：开发标准化的自动化测试脚本和工具
- **硅前验证**：为处理器设计提供性能预测和验证支持

### 1.2 技术范围

- **主要焦点**：MNN推理引擎提供的LLM基准测试工具
- **扩展框架**：llama.cpp、ONNX Runtime等其他推理引擎
- **目标平台**：具有AI推理能力的端侧设备（移动、嵌入式、IoT）
- **验证环境**：硅后硬件和硅前验证平台

## 二、核心工作方法论

### 2.1 5步递进式科学论证

```mermaid
flowchart LR
    A[**模型基础**<br>从150+模型<br>选择代表子集] --> B[**指标确定**<br>确定分析指标和评价维度]
    B --> C[**长度约束**<br>实验确定提示词长度区间]
    C --> D[**方法验证**<br>验证标准化测试方法]
    D --> E[**参数体系**<br>建立完整测试参数配置]

    style A fill:#1565c0,color:#ffffff,stroke:#0d47a1,stroke-width:2px
    style B fill:#2e7d32,color:#ffffff,stroke:#1b5e20,stroke-width:2px
    style C fill:#e65100,color:#ffffff,stroke:#bf360c,stroke-width:2px
    style D fill:#6a1b9a,color:#ffffff,stroke:#4a148c,stroke-width:2px
    style E fill:#c62828,color:#ffffff,stroke:#b71c1c,stroke-width:2px
```

### 2.2 当前阶段：预备阶段

**状态**：科学方法论已建立，文档框架完成
**核心任务**：通过5步递进论证建立端侧LLM推理基准测试基础
**特点**：注重科学性、实用性、标准化、系统性

## 三、详细目录结构

### 3.1 预备阶段详细结构（当前阶段）

```
01-预备阶段/
├── README.md              # 阶段工作逻辑和导航指南
├── 任务规划.md              # 5步科学方法论详细说明
├── 1.基准测试大模型集选用合理性分析/    # 模型基础（1号报告）
├── 2.Prefill与Decode性能指标可行性论证/    # 指标确定（2号报告）
├── 3.基准测试提示词长度选定合理性分析/        # 长度约束（3号报告）
├── 4.llama.cpp固定提示词模式可行性论证/        # 方法验证（4号报告）
└── 5.基准测试变量参数集选定合理性分析/        # 参数体系（5号报告）
```

### 3.2 支持目录

- **02-初测阶段/**：广泛参数测试和范围确定
- **03-详测阶段/**：详细数据采集和性能建模
- **04-硅前阶段/**：自动化脚本和硅后验证
- **模板/**：标准化文档模板
- **共享资源/**：参考资料和配置文件

## 四、技术栈与工具

### 4.1 核心技术栈
- **推理引擎**：MNN推理引擎（主要验证工具）
- **测试模式**：llama.cpp固定提示词模式、Prefill/Decode分离测试
- **分析指标**：pp值（Prefill阶段tps）、tp值（Decode阶段tps）、混合结果、测试耗时
- **目标平台**：具有AI推理能力的端侧设备（移动、嵌入式、IoT）

### 4.2 数据分析工具
- **NumPy/Pandas**：数据处理和分析
- **SciPy/Statsmodels**：统计建模和分析
- **Matplotlib/Seaborn**：数据可视化
- **Scikit-learn**：机器学习建模

### 4.3 文档管理
- **Markdown**：文档编写和版本控制
- **Mermaid**：图表绘制标准
- **Git**：版本控制和协作

## 五、工作指导

### 5.1 文档编写重点
- **科学性**：确保技术分析的科学性和可重现性
- **实用性**：关注端侧设备实际需求和约束
- **标准化**：建立可重现的测试方法
- **系统性**：覆盖模型、方法、参数的完整体系

### 5.2 协作规范
- **语言**：主文档使用中文，技术说明可混合英文
- **图表标准**：统一使用Mermaid格式
- **内容聚焦**：每层README承担明确的职责，避免重复
- **依赖明确**：严格遵守递进依赖关系

### 5.3 工作优先级
1. **科学严谨**：技术分析必须有科学依据
2. **实用导向**：解决端侧设备实际问题
3. **规范统一**：遵循标准化要求
4. **完整系统**：建立全面的测试体系

## 六、质量标准

### 6.1 技术质量保证
- **数据可靠性**：测试数据的准确性和完整性
- **方法可重现**：标准化的测试流程
- **分析科学性**：基于统计学的验证方法
- **模型准确性**：性能预测的有效性

### 6.2 文档质量标准
- **逻辑清晰**：5步递进逻辑明确
- **内容准确**：技术描述准确无歧义
- **格式统一**：遵循模板和规范
- **维护及时**：反映最新工作成果

## 七、关键交付原则

### 7.1 核心交付物类型
- **科学论证报告**：5步递进论证的技术报告
- **测试方法标准**：可重现的基准测试方法
- **参数体系规范**：完整的测试参数配置
- **分析框架工具**：支撑后续阶段的科学基础

### 7.2 交付要求
- **可重现性**：所有方法和结果必须可重现
- **可扩展性**：支持多引擎和多平台扩展
- **可维护性**：便于长期维护和更新
- **可使用性**：实际应用的指导价值

## 八、常见工作指导

### 8.1 技术分析工作
1. **遵循5步逻辑**：严格按照递进依赖关系执行
2. **重视实证**：基于实际测试数据进行分析
3. **注重质量**：确保分析方法的科学性
4. **保持一致性**：与整体方法论保持一致

### 8.2 文档管理
1. **分层更新**：确保各层README的一致性
2. **及时同步**：变更时同步更新相关文档
3. **版本管理**：重要的技术决策需要版本记录
4. **质量审核**：关键文档需要质量检查

### 8.3 技术创新
1. **方法创新**：建立端侧AI推理的行业标准
2. **工具优化**：提升测试效率和准确性
3. **模型完善**：优化性能预测模型
4. **标准推进**：推动技术标准的发展

## 九、注意事项

- **避免时间管理**：文档系统专注工作方法论，不涉及时间和进度管理
- **专注科学性**：重点是技术分析和科学方法，不是项目管理
- **保持实用导向**：关注端侧设备的实际需求和解决方案
- **及时更新**：方法论或技术变更时同步更新指导信息

## 十、当前项目状态

- **预备阶段**：科学方法论已建立，5步递进框架完成
- **初测阶段**：规划完成，等待预备阶段基础建成后启动
- **详测阶段**：规划完成，依赖初测阶段结果
- **硅前阶段**：规划完成，与详测阶段并行推进

---

**最后更新**：2025年11月19日
**适用版本**：5步递进式工作方法论v1.0