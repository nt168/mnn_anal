# 详测阶段1数据库测试结果总结

---

## 测试项目一：三模型(n_prompt, n_gen)参数矩阵扫描

该项目涉及任务1-3，测试三个不同规模模型在n_prompt(64-1024)和n_gen(32-128)参数组合矩阵下的性能表现。

### 测试范围
- **涉及任务**: 任务1、任务2、任务3
- **测试模型**: qwen2_5_0_5b(0.5B)、smolvlm2_256m(0.256B)、llama_3_2_1b(1.0B)
- **总用例数**: 193个
- **性能记录**: 386条 (pp+tg各193条)

### 固定参数
| 参数 | 数值 |
|------|------|
| 线程数 | 默认值(单线程) |
| 精度 | 2 (Low精度模式) |
| KV缓存 | false |
| 内存映射 | 0 |
| 动态优化 | 0 |
| 重复次数 | 3 |

### 扫描参数矩阵
- **n_prompt**: 64-1024 tokens，共16个采样点 [64,128,192,256,320,384,448,512,576,640,704,768,832,896,960,1024]
- **n_gen**: 32-128 tokens，共4个采样点 [32,64,96,128]
- **参数组合**: 16×4=64种组合/模型，3个模型共192个理论组合
- **实际用例**: 193个 (包含基准验证)

### 模型详细分布
| 模型名称 | 模型规模 | 任务分配 | 用例数 | n_prompt覆盖 |
|----------|----------|----------|--------|-------------|
| qwen2_5_0_5b | 0.5B | 任务1 | 64 | 完整16个点 |
| smolvlm2_256m | 0.256B | 任务1 | 64 | 完整16个点 |
| llama_3_2_1b | 1.0B | 任务2+任务3 | 65 | 前11个点(任务2)+后6个点(任务3) |

### 数据库相关记录
- **任务表(tasks)**: 任务1-3，状态completed
- **Suite表(suites)**: 4条记录，关联任务1-3
- **用例表(case_definitions)**: 193条记录，状态success
- **性能结果表(benchmark_results)**: 386条性能记录
- **变量表(case_variable_values)**: n_prompt和n_gen参数组合记录

---

## 测试项目二：六线程三模型(n_prompt, n_gen)参数矩阵大范围扫描

该项目涉及任务8，测试在6线程配置下三个模型在大范围n_prompt(320-512)和n_gen(32-64)参数组合矩阵下的性能表现。

### 测试范围
- **涉及任务**: 任务8
- **测试模型**: qwen2_5_0_5b(0.5B)、llama_3_2_1b(1.0B)、smolvlm2_256m(0.256B)
- **总用例数**: 195个
- **性能记录**: 390条 (pp+tg各195条)

### 固定参数
| 参数 | 数值 |
|------|------|
| 线程数 | 6 |
| 精度 | 2 (Low精度模式) |
| KV缓存 | true |
| 内存映射 | 1 |
| 动态优化 | 7 |
| vp | 1 |
| 重复次数 | 3 |

### 扫描参数矩阵
- **n_prompt**: 320-512 tokens，共13个采样点 [320,336,352,368,384,400,416,432,448,464,480,496,512]
- **n_gen**: 32-64 tokens，共5个采样点 [32,40,48,56,64]
- **参数组合**: 13×5=65种组合/模型，3个模型共195个组合
- **实际用例**: 195个

### 模型详细分布
| 模型名称 | 模型规模 | 用例数 | 参数覆盖 |
|----------|----------|--------|----------|
| qwen2_5_0_5b | 0.5B | 65 | 完整65个组合 |
| llama_3_2_1b | 1.0B | 65 | 完整65个组合 |
| smolvlm2_256m | 0.256B | 65 | 完整65个组合 |

### 原始配置文件
- **文件位置**: 1/task/mnn_llm_pn_sweep_step-p16-n8-t6.yaml
- **配置匹配**: YAML配置与任务8执行100%匹配

### 数据库相关记录
- **任务表(tasks)**: 任务8，状态completed
- **Suite表(suites)**: 3条记录，关联任务8
- **用例表(case_definitions)**: 195条记录，状态success
- **性能结果表(benchmark_results)**: 390条性能记录
- **变量表(case_variable_values)**: n_prompt和n_gen参数组合记录（任务8）

---

## 测试任务概览

| 任务ID | 任务名称 | 状态 | 用例数 | Suite数 |
|--------|----------|------|--------|---------|
| 1 | mnn_llm_pn_sweep_step-n64-p32_20251201_112601 | completed | 128 | 2 |
| 2 | mnn_llm_pn_sweep_step-n64-p32_20251201_153329 | completed | 41 | 1 |
| 3 | mnn_llm_pn_sweep_step-n64-p32_20251201_180518 | completed | 24 | 1 |
| 4 | mnn_llm_pn_sweep_step-n64-p32-t6_20251204_145524 | completed | 5 | 1 |
| 5 | mnn_llm_pn_sweep_step-n64-p32-t6_20251204_150240 | completed | 1 | 1 |
| 6 | mnn_llm_pn_sweep_step-n64-p32-t6_20251204_150419 | completed | 1 | 1 |
| 7 | mnn_llm_pn_sweep_step-n64-p32-t6_20251204_151017 | completed | 7 | 1 |
| 8 | mnn_llm_pn_sweep_step-n64-p32-t6_20251204_151259 | completed | 195 | 3 |

**统计信息**:
- 总测试任务: 8个
- 总Suite测试套件: 10个
- 总测试用例: 402个
- 成功执行用例: 402个 (100%)
- 总性能记录: 804条 (每个用例pp+tg两个指标)
- **测试项目分布**:
  - 测试项目一(单线程基准): 193个用例 (任务1-3)
  - 测试项目二(六线程优化): 195个用例 (任务8)

## Suite配置记录

| Suite名称 | 模型名称 | 用例数 |
|------------|----------|--------|
| pn_sweep_step-n64-p32 | qwen2_5_0_5b | 134 |
| pn_sweep_step-n64-p32 | smolvlm2_256m | 134 |
| pn_sweep_step-n64-p32 | llama_3_2_1b | 134 |

## 固定参数配置

| 参数 | 数值 | 说明 |
|------|------|------|
| precision | 2 | Low精度模式 |
| kv_cache | false | 关闭KV缓存 |
| mmap | 0 | 关闭内存映射 |
| dynamicOption | 0 | 基础动态优化级别 |
| repeat | 3 | 重复测试3次 |

## 变量参数矩阵

### n_prompt变量
- 起始值: 64 tokens
- 结束值: 1024 tokens
- 步长: 64 tokens
- 采样点数: 16个
- 参数值: [64, 128, 192, 256, 320, 384, 448, 512, 576, 640, 704, 768, 832, 896, 960, 1024]

### n_gen变量
- 基础值: 32 tokens (主要测试)
- 扩展值: 覆盖32-128 tokens范围

### threads变量
- 单线程配置: 1 thread
- 多线程配置: 6 threads

## 数据库表统计

### tasks表
- 记录数: 8条
- 状态: 8条completed

### suites表
- 记录数: 10条
- 关联任务: 任务1-8

### case_definitions表
- 记录数: 402条
- 成功状态: 402条success

### benchmark_results表
- 记录数: 804条
- 结果类型: pp (Prefill) + tg (Token Generation) 各402条

## 按任务分组统计

| 任务组 | 线程配置 | 涉及模型 | 用例数 |
|--------|----------|----------|--------|
| 任务1-3 | 1 thread | qwen2_5_0_5b, smolvlm2_256m, llama_3_2_1b | 193 |
| 任务4-7 | 6 threads | qwen2_5_0_5b, smolvlm2_256m, llama_3_2_1b | 14
| 任务8 | 6 threads | qwen2_5_0_5b, smolvlm2_256m, llama_3_2_1b | 195 |

## 按模型分组统计

| 模型名称 | 模型规模 | 总用例数 | 单线程用例 | 六线程用例 |
|----------|----------|----------|------------|------------|
| qwen2_5_0_5b | 0.5B | 134 | 64 | 70 |
| smolvlm2_256m | 0.256B | 134 | 64 | 70 |
| llama_3_2_1b | 1.0B | 134 | 65 | 69 |

## 数据文件信息

- 数据库名称: benchmark_results.db
- 文件大小: 425KB
- 创建时间: 2025年12月1日
- 最后更新: 2025年12月4日